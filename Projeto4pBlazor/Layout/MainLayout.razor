@inherits LayoutComponentBase

<header class="bg-black fixed top-0 left-0 w-full flex items-center justify-between p-4">
    <div class="flex items-center space-x-4 bg-gray-800 rounded-full p-2">
        <button class="text-white hover:bg-red-500 rounded-full px-4 py-2">New Sheet</button>
        <span class="text-white">/</span>
        <button class="text-white hover:bg-red-500 rounded-full px-4 py-2">Garrison</button>
        <span class="text-white">/</span>
        <button class="text-white hover:bg-red-500 rounded-full px-4 py-2">Compendium</button>
    </div>
    <div class="bg-gray-800 rounded-full p-2">
        <button class="text-white hover:bg-red-500 rounded-full px-4 py-2" @onclick="ToggleLoginPopup">Login</button>
    </div>
</header>
<main class="pt-16">
    @Body
</main>

@if (isLoginPopupVisible)
{
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="bg-gray-700 p-6 rounded shadow-lg">
            @if (isRegistering)
            {
                <h2 class="text-lg text-gray-50 font-bold mb-4">Register</h2>
                <form>
                    <div class="mb-4">
                        <label class="block text-white">Email</label>
                        <input type="email" class="w-full border rounded px-3 py-2" />
                    </div>
                    <div class="mb-4">
                        <label class="block text-white">Password</label>
                        <input type="password" class="w-full border rounded px-3 py-2" />
                    </div>
                    <div class="flex justify-end">
                        <button class="text-white text-sm underline hover:text-cyan-400 mr-2" @onclick="ToggleRegistering">Already have an account? Log in!</button>
                        <button type="button" class="bg-red-500 hover:bg-red-400 text-white px-4 py-2 rounded" @onclick="ToggleLoginPopup">Close</button>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-400 text-white px-4 py-2 rounded ml-2">Register</button>
                    </div>
                </form>
            }
            else
            {
                <h2 class="text-lg text-gray-50 font-bold mb-4">Login</h2>
                <form>
                    <div class="mb-4">
                        <label class="block text-white">Email</label>
                        <input type="text" class="w-full border rounded px-3 py-2" />
                    </div>
                    <div class="mb-4">
                        <label class="block text-white">Password</label>
                        <input type="password" class="w-full border rounded px-3 py-2" />
                    </div>
                    <div class="flex justify-end">
                        <button class="text-white text-sm underline hover:text-cyan-400 mr-2" @onclick="ToggleRegistering">Not registered? Sign in!</button>
                        <button type="button" class="bg-red-500 hover:bg-red-400 text-white px-4 py-2 rounded" @onclick="ToggleLoginPopup">Close</button>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-400 text-white px-4 py-2 rounded ml-2">Login</button>
                    </div>
                </form>
            }
        </div>
    </div>
}

@code {
    private bool isLoginPopupVisible = false;
    private bool isRegistering = false;

    private void ToggleLoginPopup()
    {
        isLoginPopupVisible = !isLoginPopupVisible;
        if (!isLoginPopupVisible)
        {
            isRegistering = false; // Reset to login when popup is closed
        }
    }

    private void ToggleRegistering()
    {
        isRegistering = !isRegistering;
    }
}